{"version":3,"file":"log.es.js","sources":["../src/log-json.ts"],"sourcesContent":["/**\n * ### Colorized Log With JSON Structure\n * ![Debug log](https://i.imgur.com/R8Qp6Vg.png)\n * Logs messages to the console with custom styling,\n * prints JSON with description of structure layout,\n * and showing debug output in development only.\n * @param {string|object} message - The message to log. If an object is provided, it will be stringified.\n * @param {string|string[]} [options.style] default='color: blue; font-size: 11pt;' - CSS style string\n * @param {boolean} [options.hideInProduction] -  default = auto-detects based on hostname.\n *  If true, uses `console.debug` (hidden in production). If false, uses `console.log`.\n *\n */\nexport function log(message: string|object  = \"\", options: LogOptions = {}) {\n  let {\n    color,\n    style = \"color:rgb(54, 165, 220); font-size: 10pt;\",\n    hideInProduction = undefined,\n    startSpinner = false,\n    stopSpinner = false,\n  } = options;\n  const colors = getColors();\n\n  // Auto-detect if we should hide logs in production based on hostname\n  if (typeof hideInProduction === \"undefined\")\n    hideInProduction =\n      typeof window !== \"undefined\" &&\n      window?.location.hostname.includes(\"localhost\");\n\n  // For objects, print both the structure visualization and full JSON\n  if (typeof message === \"object\")\n    message =\n      printJSONStructure(message) + \"\\n\\n\" + JSON.stringify(message, null, 2);\n\n  // change color: [red] to color: red if only one\n  if (Array.isArray(color) && color.length == 1) color = color[0];\n\n  //colorize in terminal (%c is only in browser but we polyfill it)\n  if (color && typeof process !== undefined)\n    if (message.includes(\"%c\") && Array.isArray(color)) // replace each c with color[i]\n      message = message.replace(/%c/g, (match, index) => colors[color[index]] || \"\");\n    else if (color && typeof color === \"string\")\n      message = (colors[color] || \"\") + message + colors.reset;\n\n\n\n  //  Displays an animated spinner in the terminal with the provided text.\n  var i = 0;\n\n  if (startSpinner)\n    (global || globalThis).interval = setInterval(() => {\n      process.stdout.write(\n        (Array.isArray(color) ? colors[color[0]] : colors[color] || \"\") +\n          \"\\r\" +\n          \"⠋⠙⠹⠸⠼⠴⠦⠧⠇⠏\".split(\"\")[(i = ++i % 10)] +\n          \" \" +\n          message +\n          colors.reset\n      );\n    }, 50);\n  else if (stopSpinner) {\n    clearInterval((global || globalThis).interval);\n    process.stdout.write(\n      \"\\r\" + (message || \" \") + \" \".repeat(message.length + 20) + \"\\n\"\n    );\n  } else if (typeof style === \"string\") {\n    // check if style is a one word color code or named color\n    //test if style is valid as a CSS color name\n    if (style.split(\" \").length == 1 || color) {\n      style = `color: ${color || style}; font-size: 11pt;`;\n    } else {\n      // check if style is valid as a CSS color code\n      if (style.match(/^#[0-9a-fA-F]{6}$/)) {\n        style = `color: ${style}; font-size: 11pt;`;\n      }\n    }\n    // Use console.debug for production-hidden logs, console.log otherwise\n    if (hideInProduction)\n      console.debug((style ? \"%c\" : \"\") + (message || \"\"), style);\n    else console.log((style ? \"%c\" : \"\") + (message || \"\"), style);\n  } else if (typeof style === \"object\") console.log(message, ...(style as any));\n  return true;\n}\n\nexport interface LogOptions {\n  /** CSS style string or array of CSS strings for browser console styling */\n  style?: string | string[];\n  /** Optional color name or code for terminal environments */\n  color?: ColorName | ColorName[] | string | string[] ;\n  /** If true, hides log in production (auto-detects by hostname if undefined) */\n  hideInProduction?: boolean;\n  /** Start a spinner (for CLI tools, optional) */\n  startSpinner?: boolean;\n  /** Stop a spinner (for CLI tools, optional) */\n  stopSpinner?: boolean;\n}\n\n/**\n * Available color names\n */\nexport enum ColorName {\n  RESET = 'reset',\n  BLACK = 'black',\n  RED = 'red',\n  GREEN = 'green',\n  YELLOW = 'yellow',\n  BLUE = 'blue',\n  MAGENTA = 'magenta',\n  CYAN = 'cyan',\n  WHITE = 'white',\n  GRAY = 'gray',\n  BRIGHT_RED = 'brightRed',\n  BRIGHT_GREEN = 'brightGreen',\n  BRIGHT_YELLOW = 'brightYellow',\n  BRIGHT_BLUE = 'brightBlue',\n  BRIGHT_MAGENTA = 'brightMagenta',\n  BRIGHT_CYAN = 'brightCyan',\n  BRIGHT_WHITE = 'brightWhite',\n  BG_RED = 'bgRed',\n  BG_GREEN = 'bgGreen',\n  BG_YELLOW = 'bgYellow',\n  BG_BLUE = 'bgBlue',\n  BG_MAGENTA = 'bgMagenta',\n  BG_CYAN = 'bgCyan',\n  BG_WHITE = 'bgWhite',\n  BG_GRAY = 'bgGray',\n  BG_BLACK = 'bgBlack',\n  BG_BRIGHT_RED = 'bgBrightRed',\n  BG_BRIGHT_GREEN = 'bgBrightGreen',\n  BG_BRIGHT_YELLOW = 'bgBrightYellow',\n  BG_BRIGHT_BLUE = 'bgBrightBlue',\n  BG_BRIGHT_MAGENTA = 'bgBrightMagenta',\n  BG_BRIGHT_CYAN = 'bgBrightCyan',\n  BG_BRIGHT_WHITE = 'bgBrightWhite',\n}\n\n/**\n * Color mapping with ANSI codes and HTML hex values\n * @type {Record<ColorName, [number, string]>}\n * @description Maps color names to [ansiCode, hexValue] pairs\n * - ansiCode: ANSI escape sequence number for terminal colors\n * - hexValue: Hex color value (without #) for HTML/CSS\n */\nconst colorMap: Record<ColorName, [number, string]> = {\n  [ColorName.RESET]: [0, '000000'],\n  [ColorName.BLACK]: [30, '000000'],\n  [ColorName.RED]: [31, 'ff0000'],\n  [ColorName.GREEN]: [32, '00ff00'],\n  [ColorName.YELLOW]: [33, 'ffff00'],\n  [ColorName.BLUE]: [34, '0000ff'],\n  [ColorName.MAGENTA]: [35, 'ff00ff'],\n  [ColorName.CYAN]: [36, '00ffff'],\n  [ColorName.WHITE]: [37, 'ffffff'],\n  [ColorName.GRAY]: [90, '808080'],\n  [ColorName.BRIGHT_RED]: [91, 'ff5555'],\n  [ColorName.BRIGHT_GREEN]: [92, '55ff55'],\n  [ColorName.BRIGHT_YELLOW]: [93, 'ffff55'],\n  [ColorName.BRIGHT_BLUE]: [94, '5555ff'],\n  [ColorName.BRIGHT_MAGENTA]: [95, 'ff55ff'],\n  [ColorName.BRIGHT_CYAN]: [96, '55ffff'],\n  [ColorName.BRIGHT_WHITE]: [97, 'ffffff'],\n  [ColorName.BG_BLACK]: [40, '000000'],\n  [ColorName.BG_RED]: [41, 'ff0000'],\n  [ColorName.BG_GREEN]: [42, '00ff00'],\n  [ColorName.BG_YELLOW]: [43, 'ffff00'],\n  [ColorName.BG_BLUE]: [44, '0000ff'],\n  [ColorName.BG_MAGENTA]: [45, 'ff00ff'],\n  [ColorName.BG_CYAN]: [46, '00ffff'],\n  [ColorName.BG_WHITE]: [47, 'ffffff'],\n  [ColorName.BG_GRAY]: [100, '808080'],\n  [ColorName.BG_BRIGHT_RED]: [101, 'ff8888'],\n  [ColorName.BG_BRIGHT_GREEN]: [102, '88ff88'],\n  [ColorName.BG_BRIGHT_YELLOW]: [103, 'ffff88'],\n  [ColorName.BG_BRIGHT_BLUE]: [104, '8888ff'],\n  [ColorName.BG_BRIGHT_MAGENTA]: [105, 'ff88ff'],\n  [ColorName.BG_BRIGHT_CYAN]: [106, '88ffff'],\n  [ColorName.BG_BRIGHT_WHITE]: [107, 'ffffff'],\n};\n\n/**\n * Returns color codes based on the specified format\n * @param format - Output format for colors\n *   - 'ansi': Returns ANSI escape codes (e.g., '\\x1b[31m')\n *   - 'html': Returns HTML hex colors (e.g., '#ff0000')\n * @returns Object with color names as keys and color codes as values\n */\nexport function getColors(format: 'html' | 'ansi' = 'ansi'): Record<ColorName, string> {\n  const colors: Record<ColorName, string> = {} as Record<ColorName, string>;\n  for (const [name, [ansiCode, hexCode]] of Object.entries(colorMap)) {\n    colors[name] = format === 'html' ? '#' + hexCode : '\\x1b[' + ansiCode + 'm';\n  }\n  return colors;\n}\n\n/**\n * Determines the appropriate color code for a given value type\n * Used for consistent color coding in the structure visualization\n */\nfunction getColorForType(value) {\n  const colors = getColors();\n  if (typeof value === \"string\") return colors.yellow;\n  if (typeof value === \"number\") return colors.cyan;\n  if (typeof value === \"boolean\") return colors.magenta;\n  if (typeof value === \"function\") return colors.red;\n  if (value === null) return colors.gray;\n  if (Array.isArray(value)) return colors.blue;\n  if (typeof value === \"object\") return colors.green;\n  return colors.white;\n}\n\n/**\n * Returns a string representation of the value's type\n * Used to show simplified type information in the structure visualization\n */\nfunction getTypeString(value) {\n  if (typeof value === \"string\") return '\"\"';\n  if (typeof value === \"number\") return \"number\";\n  if (typeof value === \"boolean\") return \"bool\";\n  if (typeof value === \"function\") return \"function\";\n  if (value === null) return \"null\";\n  if (Array.isArray(value)) {\n    if (value.length) return \"[\" + getTypeString(value[0]) + \"]\";\n    else return \"[]\";\n  }\n  if (typeof value === \"object\") return \"{...}\";\n  return typeof value;\n}\n\n/**\n * Creates a colored visualization of a JSON object's structure\n * Shows the shape and types of the data rather than actual values\n * Recursively processes nested objects and arrays\n * @param {object} obj - The JSON object to visualize\n * @param {number} indent - The number of spaces to indent the object\n * @param {ColorFormat} colorFormat - The color format to use\n * @returns {string} The colored visualization of the JSON object\n */\nexport function printJSONStructure(obj, indent = 0, colorFormat: 'html' | 'ansi' = 'ansi') {\n  const colors = getColors(colorFormat);\n  const pad = \"  \".repeat(indent);\n  var result = \"\";\n  // Handle primitive values and null\n  if (typeof obj !== \"object\" || obj === null) {\n    const color = getColorForType(obj);\n    return color + getTypeString(obj) + colors.reset;\n  }\n  // Handle arrays with special bracket formatting\n  if (Array.isArray(obj)) {\n    result = colors.blue + \"[\" + colors.reset;\n    if (obj.length) result += \"\\n\";\n    // if array has items all of the same type or object types, print only once\n    if (obj.every((item) => typeof item === typeof obj[0])) {\n      result += pad + \"  \" + printJSONStructure(obj[0], indent + 1);\n      result += \",\";\n      result += \"\\n\";\n    } else {\n    obj.forEach((item, idx) => {\n      result += pad + \"  \" + printJSONStructure(item, indent + 1);\n      if (idx < obj.length - 1) result += \",\";\n      result += \"\\n\";\n    });\n    result += pad + colors.blue + \"]\" + colors.reset;\n    return result;\n    }\n  }\n\n  // Handle objects with special brace and property formatting\n  result = colors.green + \"{\" + colors.reset;\n  const keys = Object.keys(obj);\n  if (keys.length) result += \"\\n\";\n  keys.forEach((key, index) => {\n    const value = obj[key];\n    const color = getColorForType(value);\n    result += pad + \"  \";\n\n    // Handle nested objects recursively\n    if (typeof value === \"object\" && value !== null && !Array.isArray(value)) {\n      result +=\n        color +\n        key +\n        colors.reset +\n        \": \" +\n        printJSONStructure(value, indent + 1);\n    }\n    // Handle nested arrays recursively\n    else if (Array.isArray(value)) {\n      result +=\n        color +\n        key +\n        colors.reset +\n        \": \" +\n        printJSONStructure(value, indent + 1);\n    }\n    // Handle primitive values\n    else {\n      result += color + key + \": \" + getTypeString(value) + colors.reset;\n    }\n    if (index < keys.length - 1) result += \",\";\n    result += \"\\n\";\n  });\n  result += pad + colors.green + \"}\" + colors.reset;\n\n  // Only log at top level of recursion\n  if (indent === 0) {\n    // console.log(result);\n  }\n  return result;\n}\n\n"],"names":["ColorName"],"mappings":"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"}